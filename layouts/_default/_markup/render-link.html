{{- $isExternal := false -}}
{{- $url := .Destination -}}
{{- $isExternal = or (strings.HasPrefix $url "http://") (strings.HasPrefix $url "https://") -}}
{{- $isExternal = and $isExternal (not (strings.HasPrefix $url .Page.Site.BaseURL)) -}}

{{- if $isExternal -}}
<a href="{{ .Destination }}" target="_blank" rel="noopener noreferrer" class="external-link">{{ .Text }}</a>
{{- else -}}
<a href="{{ .Destination }}"{{ with .Title }} title="{{ . }}"{{ end }}>{{ .Text }}</a>
{{- end -}}
